<mat-card class="form-card">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>add_circle</mat-icon>
      Agregar Nuevo Dispositivo
    </mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="deviceForm" (ngSubmit)="onSubmit()" class="device-form">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>ID del Dispositivo</mat-label>
        <input
          matInput
          formControlName="id"
          placeholder="Ej: persiana-salon, puerta-01, ventana-cocina"
          required>
        <mat-icon matPrefix>tag</mat-icon>
        <mat-hint>Identificador único del dispositivo (cualquier texto)</mat-hint>
        @if (deviceForm.get('id')?.invalid && deviceForm.get('id')?.touched) {
          <mat-error>{{ getErrorMessage('id') }}</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Descripción</mat-label>
        <input
          matInput
          formControlName="description"
          placeholder="Ej: Ventana Dormitorio Principal"
          required>
        <mat-icon matPrefix>description</mat-icon>
        <mat-hint>Nombre descriptivo del dispositivo</mat-hint>
        @if (deviceForm.get('description')?.invalid && deviceForm.get('description')?.touched) {
          <mat-error>{{ getErrorMessage('description') }}</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Tipo</mat-label>
        <mat-select formControlName="type" required>
          @for (type of deviceTypes; track type.value) {
            <mat-option [value]="type.value">
              <mat-icon>{{ type.value === 'PUERTA' ? 'door_sliding' : 'window' }}</mat-icon>
              {{ type.label }}
            </mat-option>
          }
        </mat-select>
        <mat-icon matPrefix>category</mat-icon>
      </mat-form-field>

      <div class="form-actions">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="deviceForm.invalid"
          class="submit-btn">
          <mat-icon>add</mat-icon>
          Agregar Dispositivo
        </button>

        <button
          mat-button
          type="button"
          (click)="deviceForm.reset({ type: 'VENTANA' })"
          class="reset-btn">
          <mat-icon>clear</mat-icon>
          Limpiar
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
