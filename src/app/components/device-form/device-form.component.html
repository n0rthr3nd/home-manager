<div class="form-container">
  <div class="form-header">
    <mat-icon>add_circle</mat-icon>
    <span>Nuevo Dispositivo</span>
  </div>

  <form [formGroup]="deviceForm" (ngSubmit)="onSubmit()" class="device-form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>ID del Dispositivo</mat-label>
      <input
        matInput
        formControlName="id"
        placeholder="Ej: persiana-salon, puerta-01"
        required>
      <mat-icon matPrefix>tag</mat-icon>
      <mat-hint>Identificador único del dispositivo</mat-hint>
      @if (deviceForm.get('id')?.invalid && deviceForm.get('id')?.touched) {
        <mat-error>{{ getErrorMessage('id') }}</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Descripción</mat-label>
      <input
        matInput
        formControlName="description"
        placeholder="Ej: Ventana Dormitorio Principal"
        required>
      <mat-icon matPrefix>description</mat-icon>
      <mat-hint>Nombre descriptivo del dispositivo</mat-hint>
      @if (deviceForm.get('description')?.invalid && deviceForm.get('description')?.touched) {
        <mat-error>{{ getErrorMessage('description') }}</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Tipo</mat-label>
      <mat-select formControlName="type" required>
        @for (type of deviceTypes; track type.value) {
          <mat-option [value]="type.value">
            <mat-icon>{{ type.value === 'PUERTA' ? 'door_sliding' : 'window' }}</mat-icon>
            {{ type.label }}
          </mat-option>
        }
      </mat-select>
      <mat-icon matPrefix>category</mat-icon>
    </mat-form-field>

    <div class="inverted-checkbox">
      <mat-checkbox formControlName="inverted">
        <strong>Invertir controles</strong>
        <span class="checkbox-hint">Invierte ON/OFF si el motor va al revés</span>
      </mat-checkbox>
    </div>

    <div class="form-actions">
      <button
        class="btn-submit"
        type="submit"
        [disabled]="deviceForm.invalid">
        <mat-icon>add</mat-icon>
        Agregar Dispositivo
      </button>

      <button
        class="btn-reset"
        type="button"
        (click)="deviceForm.reset({ type: 'VENTANA', inverted: false })">
        <mat-icon>clear</mat-icon>
        Limpiar
      </button>
    </div>
  </form>
</div>
