<div class="device-list-container">
  @if (groupedDevices$ | async; as grouped) {
  @if (grouped.length === 0) {
  <div class="empty-state">
    <div class="empty-icon-wrap">
      <mat-icon>devices</mat-icon>
    </div>
    <h2>No hay dispositivos</h2>
    <p>Pulsa el bot√≥n <strong>+</strong> para agregar tu primer dispositivo</p>
  </div>
  } @else {
  @for (group of grouped; track group.name) {
  <section class="device-section">
    <div class="section-header">
      <mat-icon>meeting_room</mat-icon>
      <span class="section-title">{{ group.name }}</span>
      <span class="section-count">{{ group.devices.length }}</span>
    </div>
    <div class="devices-stack">
      @for (device of group.devices; track device.id) {
      <app-blind-control [device]="device"></app-blind-control>
      }
    </div>
  </section>
  }
  }
  } @else {
  <div class="loading-state">
    <mat-spinner diameter="36"></mat-spinner>
    <p>Cargando dispositivos...</p>
  </div>
  }
</div>